import{e as k,b as P,g as at,c as D,d as ke,_ as Et,a as wt,h as _t}from"./@babel-pBanenlM.js";import{c as we}from"./classnames-C9FZUsQl.js";import{R as it}from"./rc-resize-observer-B5SAndUk.js";import{v as j,G as Lt,u as me,i as qe}from"./rc-util-B_AY2VOg.js";import{r as t}from"./react-DHBI0EtI.js";import{r as Je}from"./react-dom-DvAqprxs.js";var ot=t.forwardRef(function(e,d){var c=e.height,s=e.offsetY,f=e.offsetX,v=e.children,l=e.prefixCls,o=e.onInnerResize,b=e.innerProps,h=e.rtl,g=e.extra,n={},S={display:"flex",flexDirection:"column"};return s!==void 0&&(n={height:c,position:"relative",overflow:"hidden"},S=k(k({},S),{},P(P(P(P(P({transform:"translateY(".concat(s,"px)")},h?"marginRight":"marginLeft",-f),"position","absolute"),"left",0),"right",0),"top",0))),t.createElement("div",{style:n},t.createElement(it,{onResize:function(R){var i=R.offsetHeight;i&&o&&o()}},t.createElement("div",at({style:S,className:we(P({},"".concat(l,"-holder-inner"),l)),ref:d},b),v,g)))});ot.displayName="Filler";function zt(e){var d=e.children,c=e.setRef,s=t.useCallback(function(f){c(f)},[]);return t.cloneElement(d,{ref:s})}function Dt(e,d,c,s,f,v,l,o){var b=o.getKey;return e.slice(d,c+1).map(function(h,g){var n=d+g,S=l(h,n,{style:{width:s},offsetX:f}),u=b(h);return t.createElement(zt,{key:u,setRef:function(i){return v(h,i)}},S)})}function Ct(e,d,c){var s=e.length,f=d.length,v,l;if(s===0&&f===0)return null;s<f?(v=e,l=d):(v=d,l=e);var o={__EMPTY_ITEM__:!0};function b(R){return R!==void 0?c(R):o}for(var h=null,g=Math.abs(s-f)!==1,n=0;n<l.length;n+=1){var S=b(v[n]),u=b(l[n]);if(S!==u){h=n,g=g||S!==b(l[n+1]);break}}return h===null?null:{index:h,multiple:g}}function It(e,d,c){var s=t.useState(e),f=D(s,2),v=f[0],l=f[1],o=t.useState(null),b=D(o,2),h=b[0],g=b[1];return t.useEffect(function(){var n=Ct(v||[],e||[],d);(n==null?void 0:n.index)!==void 0&&g(e[n.index]),l(e)},[e]),[h]}var Qe=(typeof navigator>"u"?"undefined":ke(navigator))==="object"&&/Firefox/i.test(navigator.userAgent);const ut=function(e,d,c,s){var f=t.useRef(!1),v=t.useRef(null);function l(){clearTimeout(v.current),f.current=!0,v.current=setTimeout(function(){f.current=!1},50)}var o=t.useRef({top:e,bottom:d,left:c,right:s});return o.current.top=e,o.current.bottom=d,o.current.left=c,o.current.right=s,function(b,h){var g=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,n=b?h<0&&o.current.left||h>0&&o.current.right:h<0&&o.current.top||h>0&&o.current.bottom;return g&&n?(clearTimeout(v.current),f.current=!1):(!n||f.current)&&l(),!f.current&&n}};function Tt(e,d,c,s,f,v,l){var o=t.useRef(0),b=t.useRef(null),h=t.useRef(null),g=t.useRef(!1),n=ut(d,c,s,f);function S(m,y){j.cancel(b.current),o.current+=y,h.current=y,!n(!1,y)&&(Qe||m.preventDefault(),b.current=j(function(){var L=g.current?10:1;l(o.current*L),o.current=0}))}function u(m,y){l(y,!0),Qe||m.preventDefault()}var R=t.useRef(null),i=t.useRef(null);function M(m){if(e){j.cancel(i.current),i.current=j(function(){R.current=null},2);var y=m.deltaX,L=m.deltaY,G=m.shiftKey,N=y,x=L;(R.current==="sx"||!R.current&&G&&L&&!y)&&(N=L,x=0,R.current="sx");var X=Math.abs(N),O=Math.abs(x);R.current===null&&(R.current=v&&X>O?"x":"y"),R.current==="y"?S(m,x):u(m,N)}}function w(m){e&&(g.current=m.detail===h.current)}return[M,w]}function Ht(e,d,c,s){var f=t.useMemo(function(){return[new Map,[]]},[e,c.id,s]),v=D(f,2),l=v[0],o=v[1],b=function(g){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:g,S=l.get(g),u=l.get(n);if(S===void 0||u===void 0)for(var R=e.length,i=o.length;i<R;i+=1){var M,w=e[i],m=d(w);l.set(m,i);var y=(M=c.get(m))!==null&&M!==void 0?M:s;if(o[i]=(o[i-1]||0)+y,m===g&&(S=i),m===n&&(u=i),S!==void 0&&u!==void 0)break}return{top:o[S-1]||0,bottom:o[u]}};return b}var Pt=function(){function e(){wt(this,e),P(this,"maps",void 0),P(this,"id",0),this.maps=Object.create(null)}return Et(e,[{key:"set",value:function(c,s){this.maps[c]=s,this.id+=1}},{key:"get",value:function(c){return this.maps[c]}}]),e}();function kt(e,d,c){var s=t.useState(0),f=D(s,2),v=f[0],l=f[1],o=t.useRef(new Map),b=t.useRef(new Pt),h=t.useRef();function g(){j.cancel(h.current)}function n(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;g();var R=function(){o.current.forEach(function(M,w){if(M&&M.offsetParent){var m=Lt(M),y=m.offsetHeight;b.current.get(w)!==y&&b.current.set(w,m.offsetHeight)}}),l(function(M){return M+1})};u?R():h.current=j(R)}function S(u,R){var i=e(u);o.current.get(i),R?(o.current.set(i,R),n()):o.current.delete(i)}return t.useEffect(function(){return g},[]),[S,n,b.current,v]}var et=14/15;function Ot(e,d,c){var s=t.useRef(!1),f=t.useRef(0),v=t.useRef(0),l=t.useRef(null),o=t.useRef(null),b,h=function(u){if(s.current){var R=Math.ceil(u.touches[0].pageX),i=Math.ceil(u.touches[0].pageY),M=f.current-R,w=v.current-i,m=Math.abs(M)>Math.abs(w);m?f.current=R:v.current=i,c(m,m?M:w)&&u.preventDefault(),clearInterval(o.current),o.current=setInterval(function(){m?M*=et:w*=et;var y=Math.floor(m?M:w);(!c(m,y,!0)||Math.abs(y)<=.1)&&clearInterval(o.current)},16)}},g=function(){s.current=!1,b()},n=function(u){b(),u.touches.length===1&&!s.current&&(s.current=!0,f.current=Math.ceil(u.touches[0].pageX),v.current=Math.ceil(u.touches[0].pageY),l.current=u.target,l.current.addEventListener("touchmove",h),l.current.addEventListener("touchend",g))};b=function(){l.current&&(l.current.removeEventListener("touchmove",h),l.current.removeEventListener("touchend",g))},me(function(){return e&&d.current.addEventListener("touchstart",n),function(){var S;(S=d.current)===null||S===void 0||S.removeEventListener("touchstart",n),b(),clearInterval(o.current)}},[e])}var $t=10;function Nt(e,d,c,s,f,v,l,o){var b=t.useRef(),h=t.useState(null),g=D(h,2),n=g[0],S=g[1];return me(function(){if(n&&n.times<$t){if(!e.current){S(function(C){return k({},C)});return}v();var u=n.targetAlign,R=n.originAlign,i=n.index,M=n.offset,w=e.current.clientHeight,m=!1,y=u,L=null;if(w){for(var G=u||R,N=0,x=0,X=0,O=Math.min(d.length-1,i),A=0;A<=O;A+=1){var V=f(d[A]);x=N;var Z=c.get(V);X=x+(Z===void 0?s:Z),N=X}for(var q=G==="top"?M:w-M,$=O;$>=0;$-=1){var re=f(d[$]),T=c.get(re);if(T===void 0){m=!0;break}if(q-=T,q<=0)break}switch(G){case"top":L=x-M;break;case"bottom":L=X-w+M;break;default:{var J=e.current.scrollTop,W=J+w;x<J?y="top":X>W&&(y="bottom")}}L!==null&&l(L),L!==n.lastTop&&(m=!0)}m&&S(k(k({},n),{},{times:n.times+1,targetAlign:y,lastTop:L}))}},[n,e.current]),function(u){if(u==null){o();return}if(j.cancel(b.current),typeof u=="number")l(u);else if(u&&ke(u)==="object"){var R,i=u.align;"index"in u?R=u.index:R=d.findIndex(function(m){return f(m)===u.key});var M=u.offset,w=M===void 0?0:M;S({times:0,index:R,offset:w,originAlign:i})}}}function tt(e,d){var c="touches"in e?e.touches[0]:e;return c[d?"pageX":"pageY"]}var rt=t.forwardRef(function(e,d){var c=e.prefixCls,s=e.rtl,f=e.scrollOffset,v=e.scrollRange,l=e.onStartMove,o=e.onStopMove,b=e.onScroll,h=e.horizontal,g=e.spinSize,n=e.containerSize,S=e.style,u=e.thumbStyle,R=t.useState(!1),i=D(R,2),M=i[0],w=i[1],m=t.useState(null),y=D(m,2),L=y[0],G=y[1],N=t.useState(null),x=D(N,2),X=x[0],O=x[1],A=!s,V=t.useRef(),Z=t.useRef(),q=t.useState(!1),$=D(q,2),re=$[0],T=$[1],J=t.useRef(),W=function(){clearTimeout(J.current),T(!0),J.current=setTimeout(function(){T(!1)},3e3)},C=v-n||0,le=n-g||0,_=t.useMemo(function(){if(f===0||C===0)return 0;var H=f/C;return H*le},[f,C,le]),Q=function(E){E.stopPropagation(),E.preventDefault()},ne=t.useRef({top:_,dragging:M,pageY:L,startTop:X});ne.current={top:_,dragging:M,pageY:L,startTop:X};var ae=function(E){w(!0),G(tt(E,h)),O(ne.current.top),l(),E.stopPropagation(),E.preventDefault()};t.useEffect(function(){var H=function(ie){ie.preventDefault()},E=V.current,F=Z.current;return E.addEventListener("touchstart",H),F.addEventListener("touchstart",ae),function(){E.removeEventListener("touchstart",H),F.removeEventListener("touchstart",ae)}},[]);var Se=t.useRef();Se.current=C;var ce=t.useRef();ce.current=le,t.useEffect(function(){if(M){var H,E=function(ie){var se=ne.current,Re=se.dragging,Me=se.pageY,be=se.startTop;j.cancel(H);var _e=n/V.current.getBoundingClientRect().height;if(Re){var ee=(tt(ie,h)-Me)*_e,oe=be;!A&&h?oe-=ee:oe+=ee;var pe=Se.current,ye=ce.current,Le=ye?oe/ye:0,te=Math.ceil(Le*pe);te=Math.max(te,0),te=Math.min(te,pe),H=j(function(){b(te,h)})}},F=function(){w(!1),o()};return window.addEventListener("mousemove",E),window.addEventListener("touchmove",E),window.addEventListener("mouseup",F),window.addEventListener("touchend",F),function(){window.removeEventListener("mousemove",E),window.removeEventListener("touchmove",E),window.removeEventListener("mouseup",F),window.removeEventListener("touchend",F),j.cancel(H)}}},[M]),t.useEffect(function(){W()},[f]),t.useImperativeHandle(d,function(){return{delayHidden:W}});var I="".concat(c,"-scrollbar"),Y={position:"absolute",visibility:re?null:"hidden"},B={position:"absolute",background:"rgba(0, 0, 0, 0.5)",borderRadius:99,cursor:"pointer",userSelect:"none"};return h?(Y.height=8,Y.left=0,Y.right=0,Y.bottom=0,B.height="100%",B.width=g,A?B.left=_:B.right=_):(Y.width=8,Y.top=0,Y.bottom=0,A?Y.right=0:Y.left=0,B.width="100%",B.height=g,B.top=_),t.createElement("div",{ref:V,className:we(I,P(P(P({},"".concat(I,"-horizontal"),h),"".concat(I,"-vertical"),!h),"".concat(I,"-visible"),re)),style:k(k({},Y),S),onMouseDown:Q,onMouseMove:W},t.createElement("div",{ref:Z,className:we("".concat(I,"-thumb"),P({},"".concat(I,"-thumb-moving"),M)),style:k(k({},B),u),onMouseDown:ae}))}),Yt=20;function nt(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,c=e/d*e;return isNaN(c)&&(c=0),c=Math.max(c,Yt),Math.floor(c)}var Ft=["prefixCls","className","height","itemHeight","fullHeight","style","data","children","itemKey","virtual","direction","scrollWidth","component","onScroll","onVirtualScroll","onVisibleChange","innerProps","extraRender","styles"],Xt=[],Wt={overflowY:"auto",overflowAnchor:"none"};function Vt(e,d){var c=e.prefixCls,s=c===void 0?"rc-virtual-list":c,f=e.className,v=e.height,l=e.itemHeight,o=e.fullHeight,b=o===void 0?!0:o,h=e.style,g=e.data,n=e.children,S=e.itemKey,u=e.virtual,R=e.direction,i=e.scrollWidth,M=e.component,w=M===void 0?"div":M,m=e.onScroll,y=e.onVirtualScroll,L=e.onVisibleChange,G=e.innerProps,N=e.extraRender,x=e.styles,X=_t(e,Ft),O=t.useCallback(function(a){return typeof S=="function"?S(a):a==null?void 0:a[S]},[S]),A=kt(O),V=D(A,4),Z=V[0],q=V[1],$=V[2],re=V[3],T=!!(u!==!1&&v&&l),J=t.useMemo(function(){return Object.values($.maps).reduce(function(a,r){return a+r},0)},[$.id,$.maps]),W=T&&g&&(Math.max(l*g.length,J)>v||!!i),C=R==="rtl",le=we(s,P({},"".concat(s,"-rtl"),C),f),_=g||Xt,Q=t.useRef(),ne=t.useRef(),ae=t.useRef(),Se=t.useState(0),ce=D(Se,2),I=ce[0],Y=ce[1],B=t.useState(0),H=D(B,2),E=H[0],F=H[1],ge=t.useState(!1),ie=D(ge,2),se=ie[0],Re=ie[1],Me=function(){Re(!0)},be=function(){Re(!1)},_e={getKey:O};function ee(a){Y(function(r){var p;typeof a=="function"?p=a(r):p=a;var z=dt(p);return Q.current.scrollTop=z,z})}var oe=t.useRef({start:0,end:_.length}),pe=t.useRef(),ye=It(_,O),Le=D(ye,1),te=Le[0];pe.current=te;var xe=t.useMemo(function(){if(!T)return{scrollHeight:void 0,start:0,end:_.length-1,offset:void 0};if(!W){var a;return{scrollHeight:((a=ne.current)===null||a===void 0?void 0:a.offsetHeight)||0,start:0,end:_.length-1,offset:void 0}}for(var r=0,p,z,U,pt=_.length,he=0;he<pt;he+=1){var yt=_[he],xt=O(yt),Ze=$.get(xt),Pe=r+(Ze===void 0?l:Ze);Pe>=I&&p===void 0&&(p=he,z=r),Pe>I+v&&U===void 0&&(U=he),r=Pe}return p===void 0&&(p=0,z=0,U=Math.ceil(v/l)),U===void 0&&(U=_.length-1),U=Math.min(U+1,_.length-1),{scrollHeight:r,start:p,end:U,offset:z}},[W,T,I,_,re,v]),ue=xe.scrollHeight,fe=xe.start,ve=xe.end,Oe=xe.offset;oe.current.start=fe,oe.current.end=ve;var lt=t.useState({width:0,height:v}),$e=D(lt,2),K=$e[0],ct=$e[1],st=function(r){ct({width:r.offsetWidth,height:r.offsetHeight})},Ne=t.useRef(),Ye=t.useRef(),ft=t.useMemo(function(){return nt(K.width,i)},[K.width,i]),vt=t.useMemo(function(){return nt(K.height,ue)},[K.height,ue]),ze=ue-v,De=t.useRef(ze);De.current=ze;function dt(a){var r=a;return Number.isNaN(De.current)||(r=Math.min(r,De.current)),r=Math.max(r,0),r}var Fe=I<=0,Xe=I>=ze,We=E<=0,Ve=E>=i,ht=ut(Fe,Xe,We,Ve),Ce=function(){return{x:C?-E:E,y:I}},Ie=t.useRef(Ce()),Ee=qe(function(a){if(y){var r=k(k({},Ce()),a);(Ie.current.x!==r.x||Ie.current.y!==r.y)&&(y(r),Ie.current=r)}});function Be(a,r){var p=a;r?(Je.flushSync(function(){F(p)}),Ee()):ee(p)}function mt(a){var r=a.currentTarget.scrollTop;r!==I&&ee(r),m==null||m(a),Ee()}var Te=function(r){var p=r,z=i?i-K.width:0;return p=Math.max(p,0),p=Math.min(p,z),p},St=qe(function(a,r){r?(Je.flushSync(function(){F(function(p){var z=p+(C?-a:a);return Te(z)})}),Ee()):ee(function(p){var z=p+a;return z})}),gt=Tt(T,Fe,Xe,We,Ve,!!i,St),je=D(gt,2),He=je[0],Ae=je[1];Ot(T,Q,function(a,r,p){return ht(a,r,p)?!1:(He({preventDefault:function(){},deltaX:a?r:0,deltaY:a?0:r}),!0)}),me(function(){function a(p){T&&p.preventDefault()}var r=Q.current;return r.addEventListener("wheel",He),r.addEventListener("DOMMouseScroll",Ae),r.addEventListener("MozMousePixelScroll",a),function(){r.removeEventListener("wheel",He),r.removeEventListener("DOMMouseScroll",Ae),r.removeEventListener("MozMousePixelScroll",a)}},[T]),me(function(){if(i){var a=Te(E);F(a),Ee({x:a})}},[K.width,i]);var Ke=function(){var r,p;(r=Ne.current)===null||r===void 0||r.delayHidden(),(p=Ye.current)===null||p===void 0||p.delayHidden()},Ge=Nt(Q,_,$,l,O,function(){return q(!0)},ee,Ke);t.useImperativeHandle(d,function(){return{nativeElement:ae.current,getScrollInfo:Ce,scrollTo:function(r){function p(z){return z&&ke(z)==="object"&&("left"in z||"top"in z)}p(r)?(r.left!==void 0&&F(Te(r.left)),Ge(r.top)):Ge(r)}}}),me(function(){if(L){var a=_.slice(fe,ve+1);L(a,_)}},[fe,ve,_]);var Rt=Ht(_,O,$,l),Mt=N==null?void 0:N({start:fe,end:ve,virtual:W,offsetX:E,offsetY:Oe,rtl:C,getSize:Rt}),bt=Dt(_,fe,ve,i,E,Z,n,_e),de=null;v&&(de=k(P({},b?"height":"maxHeight",v),Wt),T&&(de.overflowY="hidden",i&&(de.overflowX="hidden"),se&&(de.pointerEvents="none")));var Ue={};return C&&(Ue.dir="rtl"),t.createElement("div",at({ref:ae,style:k(k({},h),{},{position:"relative"}),className:le},Ue,X),t.createElement(it,{onResize:st},t.createElement(w,{className:"".concat(s,"-holder"),style:de,ref:Q,onScroll:mt,onMouseEnter:Ke},t.createElement(ot,{prefixCls:s,height:ue,offsetX:E,offsetY:Oe,scrollWidth:i,onInnerResize:q,ref:ne,innerProps:G,rtl:C,extra:Mt},bt))),W&&ue>v&&t.createElement(rt,{ref:Ne,prefixCls:s,scrollOffset:I,scrollRange:ue,rtl:C,onScroll:Be,onStartMove:Me,onStopMove:be,spinSize:vt,containerSize:K.height,style:x==null?void 0:x.verticalScrollBar,thumbStyle:x==null?void 0:x.verticalScrollBarThumb}),W&&i>K.width&&t.createElement(rt,{ref:Ye,prefixCls:s,scrollOffset:E,scrollRange:i,rtl:C,onScroll:Be,onStartMove:Me,onStopMove:be,spinSize:ft,containerSize:K.width,horizontal:!0,style:x==null?void 0:x.horizontalScrollBar,thumbStyle:x==null?void 0:x.horizontalScrollBarThumb}))}var Bt=t.forwardRef(Vt);Bt.displayName="List";export{Bt as L};
